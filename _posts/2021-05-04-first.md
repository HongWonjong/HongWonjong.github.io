---
layout: single
title: "Django로 설문조사 웹 어플리케이션 제작-1"
categories: [Django_basic]

---
# 1편이긴 하지만 블로그를 만들기 전부터 코드를 짜고 있었기에 중간부터 진행된다는 점 참고해주세요.

파이썬을 배운지도 2달이 되어가는데, 블록체인이니 딥러닝이니 이런 저런 최신기술 책을 사서 기웃거려보느라 정작 하나를 제대로 파 보지를 못했네요..
만들 줄 아는 건 없는 엔지니어가 공구통에 비싼 공구만 가득 채워놓은 그런 상황같아서 슬프지만 뭐 다 배우면 쓸 일이 있겠죠.

아무튼 잡담은 여기까지 하고, 시작해봅시다. 참고로 저는 제가 모르는 개념은 단 하나라도 빼놓지 않고 찾아서 설명하고 넘어갈거니까 아는 부분은 넘겨주세요.

Django는 "웹 프레임워크"입니다. 즉 웹 서비스 개발을 위한 프레임이죠. 따라서 Django로 작성한 어플리케이션을 실제 사용자들에게 제공하려면 "웹 서버"가 필요하고, 웹 서버와 이 Django어플리케이션을 통신할 수 있게 해주는 WSGI(Unicorn, uwsgi)등이 필요합니다.

<Django, web server, WSGI>
"웹 서버"란 무엇일까요? 이는 두 가지 의미를 가진다고 합니다.
- 컴퓨터 프로그램의 관점에서, 웹 서버는 웹 브라우저와 같은 클라이언트로부터 HTTP 요청을 받아들이고, HTML 문서와 같은 웹 페이지를 반환하는 프로그램을 의미합니다.
- 하드웨어의 관점에서, 위에 언급한 기능을 가진 컴퓨터 프로그램을 실행하는 컴퓨터를 "웹 서버"라고도 합니다.

그러니까 웹 서버(하드웨어)에서 웹 서버(프로그램)을 실행하는 거군요. 여기서 HTTP(Hypertext Transfer Protocol)는 인터넷 상에서 데이터를 주고 받기 위한 서버/클라이언트 모델을 따르는 프로토콜입니다. 프로토콜이란 복수의 컴퓨터나 단말기 사이에서 데이터 통신을 하기 위한 "통신규약"이구요.

다음으로 WSGI(Web Server Gateway Interface)란, 파이썬에서 어플리케이션(파이썬 스크립트)이 웹 서버와 통신하기 위한 인터페이스 입니다. 이 또한 파이썬 프레임워크니까 나중에 사용해 봅시다.

자, 이제 큰 틀에서의 설명은 대략 끝난 것 같습니다. 그러면 이제 우리는 뭘 하면 될까요? 4단계로 나눠봅시다.
1. 우리가 원하는 웹 사이트를 구현할 Django 웹 어플리케이션을 만든다.
2. 웹 서버를 구한다.
3. WSGI를 이용하여 웹 서버와 어플리케이션을 연결한다.
4. 작동을 확인하고 축배를 든다.

이 다음에는 Django 어플리케이션을 제작하고 이를 개발 서버(로컬 환경에서 개발 목적으로만 사용할 수 있고, 내가 웹사이트를 잘 만들고 있는지 검증할 수 있게 해준다.)를 통해 웹 사이트로 나타내 봅시다. 

# Django 설치
1. cmd 창에서 pip install을 통해 Django를 설치해 줍시다. 
2. 이제 Django 환경을 설치할 디렉터리로 cd 명령어를 이용해서 가주자.
3. 해당 디렉터리에서 django-admin startproject 생성할 디렉토리
    여기서 생성할 디렉토리 이름은 아무거나 해도 상관은 없지만, 내가 만들고 싶은 앱 이름과 겹치면 안된다. 이 디렉토리는 "환경"이기에 다양한 앱을 저장할 공간인데, 겹치면 헷갈리겠지?
4. 나는 Djjjango라는 디렉터리를 만들었었다. 여러분이 볼 때 헷갈릴 수 있으니 이제부터 이 디렉터리를 "프로젝트 디렉터리"라고 통칭하겠다.

그러면 프로젝트 디렉터리에 있는 다양한 파일들을 보고 넘어가자.
# 프로젝트 디렉터리의 파일
1. \_\_init\_\_.py: 이 디렉터리를 패키지처럼 다루라고 알려주는 용도의 빈 파일이다.
2. settings.py: 현재 장고 프로젝트의 환경 및 구성을 저장한다.
3. urls.py: 현재 장고 프로젝트의 URL 선언을 저장한다. 즉 Django로 작성된 사이트의 <목차>라고 할 수 있다.
4. asgi.py: ASGI와 호환되는 웹 서버에 당신의 프로젝트를 전달하기 위한 엔트리 포인트이다.
5. wsgi.py: WSGI 호환 웹 서버의 진입점이다.
6. manage.py: 장고 프로젝트와 다양한 방법으로 상호작용하는 커맨드라인의 유틸리티이다. 앞으로 볼 일이 많다.

# 설문조사 앱 생성
이제 작업을 하기 위한 환경은 알아봤다. 이제 앱을 생성할 차례인데, manage.py가 존재하는 디렉터리(프로젝트 디렉터리)에서 다음의 명령을 입력해보자.
python manage.py startapp polls

그러면 polls라는 디렉터리가 프로젝트 디렉터리 내에 생긴 것을 알 수 있다. 이 polls가 우리가 만들 투표 어플리케이션의 코드가 적힐 곳이다.

# 뷰 작성하기 & 웹 사이트 실행해보기
이제 개발 서버를 통해서 우리가 갓 만든 polls 어플리케이션을 웹 사이트로 나타내볼텐데, 그 전에 어플리케이션 안에 실제 기능을 가지는 view를 만들어주자.
view란 Django 어플리케이션이 특정 기능과 템플릿을 제공하는 웹페이지의 한 종류이다. Django에서 모든 웹 페이지와 contents들은 view에 의해서 전달된다. 각각의 view는 파이썬 함수에 의해서 나타내어지며, Django는 도메인 이름 다음의 url 부분에 따라서 view를 선택할 것이다.

그런데 일반적인 웹사이트의 url 패턴은 굉장히 복잡하기에, Django에서는 더 간결한 URL 패턴을 제공한다.
URL으로부터 뷰를 얻기 위해서 Django는 <URLconfs>를 사용하는데, 이는 URL 패턴을 뷰에 연결한다.

자, 바로 뷰를 만들고 싶지만 여기서 잠깐 멈춰야 한다. 설문조사 앱에 사용되는 뷰는 데이터베이스에서 인수를 받아와야 하기 때문에, 우리는 데이터베이스를 먼저 만들어야 한다. 
좀 복잡하긴 하지만 이 페이지를 나가서 PostgreSQL 페이지를 보고 오자.
